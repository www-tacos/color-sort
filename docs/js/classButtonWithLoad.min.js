class ButtonWithLoad{button;span;func;WAIT=1e3;constructor(t){try{this.button=t,this.button.classList.remove("button-with-load--loading"),this.span=this.button.firstElementChild,this.func=this.button.onclick}catch(s){throw console.error("たぶんbuttonのつくりが違う（想定はbuttonの中にspan）",s,t),s}}sleep=t=>new Promise(s=>setTimeout(s,t));async start(){this.button.classList.add("button-with-load--loading"),this.button.onclick=null,await this.sleep(1)}async finish(){this.button.classList.remove("button-with-load--loading");const t=this.span.innerText;this.span.innerText="Complete",await this.sleep(this.WAIT),this.span.innerText=t,this.button.onclick=this.func}async error(){this.button.classList.remove("button-with-load--loading");const t=this.span.innerText;this.span.innerText="Error",await this.sleep(this.WAIT),this.span.innerText=t,this.button.onclick=this.func}static async alertWrap(t,s){const n=s&&new ButtonWithLoad(s);try{n?await t(n):await t()}catch(t){console.error(t),alert("Errorです。詳細はデベロッパーツール（Ctrl + Shift + I）のコンソールから確認してください。"),await n.error()}}}